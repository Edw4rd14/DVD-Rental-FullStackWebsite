<!--
NAME: EDWARD TAN YUAN CHONG
-->
<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">

    <title>SP DVD STORE</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    
    <!-- jQuery script -->
    <script src="http://code.jquery.com/jquery-3.6.3.min.js"></script>
    
    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="./css/templatemo-572-designer.css">

    <link rel="shortcut icon" href="../dvd.png"> <!-- https://www.flaticon.com/free-icon/dvd_1262340 -->

<!--

TemplateMo 572 Designer

https://templatemo.com/tm-572-designer

-->
  </head>

<body class="background">

  <div class="loader">
    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
       width="34px" height="40px" viewBox="0 0 24 30" style="enable-background:new 0 0 50 50;" xml:space="preserve">
      <rect x="0" y="10" width="4" height="10" fill="#333" opacity="0.2">
        <animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0s" dur="0.8s" repeatCount="indefinite" />
        <animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0s" dur="0.8s" repeatCount="indefinite" />
        <animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0s" dur="0.8s" repeatCount="indefinite" />
      </rect>
      <rect x="8" y="10" width="4" height="10" fill="#333"  opacity="0.2">
        <animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.15s" dur="0.8s" repeatCount="indefinite" />
        <animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.15s" dur="0.8s" repeatCount="indefinite" />
        <animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.15s" dur="0.8s" repeatCount="indefinite" />
      </rect>
      <rect x="16" y="10" width="4" height="10" fill="#333"  opacity="0.2">
        <animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.3s" dur="0.8s" repeatCount="indefinite" />
        <animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.3s" dur="0.8s" repeatCount="indefinite" />
        <animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.3s" dur="0.8s" repeatCount="indefinite" />
      </rect>
    </svg>
  </div>

  <header id="#top">

      <nav class="main-navigation navbar navbar-expand-lg navbar-light">
          <div class="container">
            <a class="navbar-brand" href="index.html" id="header"> ðŸ’¿ SP DVD STORE</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div id="loginLine"><span>LOGGED IN AS: <span style="color: #ff565b;" id="username">GUEST</span></span></div>
            <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link" href="index.html">Homepage</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" href="login.html">Login</a>
                </li>
              </ul>
            </div>
          </div>
      </nav>
  </header>
  <div class="main-banner row" style="padding-bottom:0px; margin-right:0px;">
    <div class="col-lg-4 offset-lg-1">
        <div class="section-heading">
            <h2>Staff<br><em>Login</em></h2>
        </div>
    </div>
    <div class="col-lg-4 offset-lg-2">
      <div class="section-heading">
          <h2>Customer<br><em>Login</em></h2>
      </div>
  </div>
    <div class="col-lg-4 offset-lg-1" id="search-form">
        <form id="contact">
            <div class="row">
                <div class="col-lg-12 input-field">     
                    STAFF EMAIL:            
                    <input name="email" type="text" class="login-input" id="staff_email" placeholder="Staff Email*" required>               
                </div>
                <div class="col-lg-12 input-field">   
                    STAFF PASSWORD:             
                    <input name="password" type="text" class="login-input" id="staff_password" placeholder="Staff Password*" required>                           
                </div>  
                <span id="login_staff_response" class="col-lg-12"></span>    
                <div class="col-lg-6">
                  <button type="reset" class="main-button">Reset</button>                            
                </div>            
                <div class="col-lg-6">
                    <button type="submit" id="btn_staff_login" class="main-button">Login</button>    
                </div>                        
              </div>
        </form>
    </div>
    <div class="col-lg-4 offset-lg-2" id="search-form">
      <form id="contact">
          <div class="row">
              <div class="col-lg-12 input-field">     
                  CUSTOMER EMAIL:            
                  <input name="username" type="email" class="login-input" id="cs_email" placeholder="Customer Email*" required>               
              </div>
              <div class="col-lg-12 input-field">   
                  CUSTOMER PASSWORD:             
                  <input name="password" type="text" class="login-input" id="cs_password" placeholder="Customer Password*" required>                           
              </div>  
              <span id="login_customer_response" class="col-lg-12"></span>    
              <div class="col-lg-6">
                <button type="reset" class="main-button">Reset</button>                            
              </div>            
              <div class="col-lg-6">
                  <button type="submit" id="btn_customer_login" class="main-button">Login</button>    
              </div>                        
            </div>
      </form>
  </div>
  </div>


  <!-- Scripts -->
  <script src="js/isotope.min.js"></script>
    <script>
      // Loading animation function
      setTimeout(function(){
          $('.loader').fadeToggle();
      }, 1500);
      // Check user status
      if(localStorage['username'] != null) {
        $("#username").html(localStorage['username']);
        $("#username").css('text-transform','uppercase');
        // Change login button to customer/admin based on status
        if(localStorage['status'] == "admin") {
          $("#loginStatus").html('<a class="nav-link" href="admin.html">Admin</a>');
        } else {
          $("#loginStatus").html('<a class="nav-link" href="customerhome.html">Customer</a>');
        }
      }
      // Staff login API
      $("#btn_staff_login").click(function(event){
        event.preventDefault(); // Prevent default behaviour of element
        var settings = {
          "url": "http://localhost:3000/staffLogin",
          "method": "POST",
          "timeout": 0,
          "headers": {
            "Content-Type": "Application/JSON"
          },
          "data": JSON.stringify({
            "email": $("#staff_email").val(),
            "password": $("#staff_password").val()
          }),
        };
        $.ajax(settings).success(function(response) {
          localStorage['token'] = response.token;
          localStorage['username'] = response.staff_name;
          localStorage['status'] = response.status;
          window.location.href = "admin.html";
        })
        .error(function(response){
          $("#login_staff_response").html(response.responseJSON.error_msg);
        })
      });
      // Customer login API
      $("#btn_customer_login").click((event)=>{
        event.preventDefault(); // Prevent default behaviour of element
        var settings = {
          "url": "http://localhost:3000/customerLogin",
          "method": "POST",
          "timeout": 0,
          "headers": {
            "Content-Type": "application/json"
          },
          "data": JSON.stringify({
            "email": $("#cs_email").val(),
            "password": $("#cs_password").val()
          }),
        };
        $.ajax(settings).success(function(response) {
          localStorage['token'] = response.token;
          localStorage['username'] = $("#cs_email").val();
          localStorage['status'] = response.status;
          window.location.href = "customerhome.html";
        })
        .error(function(response){
          $("#login_customer_response").html(response.responseJSON.error_msg);
        });
      });
    </script>
  </body>
</html>